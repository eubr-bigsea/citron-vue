<div>
    <div v-if="user.state">
        <nav class="navbar navbar-fixed-top navbar-inverse">
            <a class="navbar-brand" href="#">Lemonade</a>
            <ul class="nav navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
            </ul>
            <ul class="nav navbar-nav  pull-right">
                <li class="nav-item" :class="{hide: language === 'en'}">
                    <a class="nav-link" href="#" @click="changeLanguage('en')">English version</a>
                </li>
                <li class="nav-item" :class="{hide: language === 'pt'}">
                    <a class="nav-link" href="#" @click="changeLanguage('pt')">Versão em português</a>
                </li>
            </ul>
        </nav>
        <div class="container-fluid">
            <div class="row small-padding">
                <div id="appx">
                    <div class="col-md-2">
                        <div class="panel operation panel-primary panel-inverse">
                            <div class="panel-heading">
                                {{title}}
                            </div>
                            <div class="panel-content">
                                <div id="menu-operations" style="height: calc(100vh - 134px); position: relative; overflow:hidden">
                                    <ul class="nav nav-list">
                                        <li class="drop-menu-item" v-for="operations in groupedOperations">
                                            <a href="#" v-on:click="toggle"><span class="fa-caret-right fa"></span> {{ $key }} </a>
                                            <ul class="nav nav-list tree slide-down">
                                                <div v-for="op in operations">
                                                    <toolbox-component :operation="op" />
                                                </div>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="panel panel-success panel-inverse">
                            <div class="panel-heading">
                                Workflow
                            </div>
                            <div class="panel-content">
                                <diagram-component form-container="properties-form"></diagram-component>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="panel panel-inverse panel-info lemonade-properties">
                        <div class="panel-heading">
                            Properties
                        </div>
                        <div class="panel-block">
                            <div id="properties-form" class="container" v-if="task">
                                <div>
                                    <h4>{{task.operation.name}}</h4>
                                    <fieldset v-for="form in forms">
                                        <legend>{{form.name}}</legend>
                                        <div v-for="field in form.fields">
                                            <component :is="field.suggested_widget + '-component'" :task="task" keep-alive :field="field" :value="getValue(field.name)"></component>
                                        </div>
                                    </fieldset>
                                    <property-description-component :task="task" />
                                </div>
                            </div>
                            <div>

                <pre id="sample-1" class="sample">
                    {"name": "Simple Workflow",
                        "tasks":[{"left":56,"top":26,"id":"e34cf78d-7c84-452f-a82b-6f6f70e81733","operation": {"id": 18},"title":"Data reader","type":"data-source"},{"left":293,"top":27,"id":"42016c59-b5b9-42e9-91cb-a4ddc8d77e9f","operation": {"id": 18},"title":"Data reader","type":"data-source"},{"left":58,"top":160,"id":"5766cde2-ef05-469a-a809-7c6118b965b7","operation": {"id": 7},"title":"Transformation","type":"operation"},{"left":294,"top":159,"id":"eaa3672d-93f7-4d6d-893a-b1a3a014522f","operation": {"id": 5},"title":"Filter (selection)","type":"operation"},{"left":59,"top":287,"id":"9b46a1fb-a05f-4596-a29b-76941d42598c","operation": {"id": 6},"title":"Projection","type":"operation"},{"left":278,"top":373,"id":"14534c26-887c-444d-b29f-b3b30eacb046","operation": {"id": 12},"title":"Set union","type":"operation"}],"flows":[{"source":"e34cf78d-7c84-452f-a82b-6f6f70e81733","target":"5766cde2-ef05-469a-a809-7c6118b965b7","source_id": "e34cf78d-7c84-452f-a82b-6f6f70e81733", "source_port":35,"target_id": "5766cde2-ef05-469a-a809-7c6118b965b7", "target_port":29},{"source":"42016c59-b5b9-42e9-91cb-a4ddc8d77e9f","target":"eaa3672d-93f7-4d6d-893a-b1a3a014522f","source_id": "42016c59-b5b9-42e9-91cb-a4ddc8d77e9f", "source_port":35,"target_id": "eaa3672d-93f7-4d6d-893a-b1a3a014522f", "target_port":1},{"source":"5766cde2-ef05-469a-a809-7c6118b965b7","target":"9b46a1fb-a05f-4596-a29b-76941d42598c","source_id": "5766cde2-ef05-469a-a809-7c6118b965b7", "source_port":30,"target_id": "9b46a1fb-a05f-4596-a29b-76941d42598c", "target_port":3},{"source":"eaa3672d-93f7-4d6d-893a-b1a3a014522f","target":"14534c26-887c-444d-b29f-b3b30eacb046","source_id": "eaa3672d-93f7-4d6d-893a-b1a3a014522f", "source_port":2,"target_id": "14534c26-887c-444d-b29f-b3b30eacb046", "target_port":6},{"source":"9b46a1fb-a05f-4596-a29b-76941d42598c","target":"14534c26-887c-444d-b29f-b3b30eacb046","source_id": "9b46a1fb-a05f-4596-a29b-76941d42598c", "source_port":4,"target_id": "14534c26-887c-444d-b29f-b3b30eacb046", "target_port":5}]}
                </pre>
                <pre id="sample-2" class="sample">
                    { "name": "Machine learning workflow",
                        "tasks":[{"left":232,"top":592,"id":"78ca0e4d-d911-4d4e-b04a-222c9598bcd4","operation": {"id": 8},"title":"Linear regression","type":"operation"},{"left":77,"top":45,"id":"17688233-a12e-48d5-972c-1cf54da5548b","operation": {"id": 18},"title":"Data reader","type":"data-source"},{"left":80,"top":183,"id":"cc8e5343-3cbe-468b-86a2-cfa3652d50f4","operation": {"id": 6},"title":"Projection","type":"operation"},{"left":79,"top":304,"id":"b79210a4-8322-422c-ba1c-b39ad7dc54e6","operation": {"id": 21},"title":"Clean missing values","type":"operation"},{"left":74,"top":435,"id":"fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74","operation": {"id": 17},"title":"Split dataset","type":"operation"},{"left":68,"top":681,"id":"ed120259-2872-416c-a951-dbac89ec357c","operation": {"id": 19},"title":"Evaluate model","type":"operation"}],"flows":[{"source":"17688233-a12e-48d5-972c-1cf54da5548b","target":"cc8e5343-3cbe-468b-86a2-cfa3652d50f4","source_id": "17688233-a12e-48d5-972c-1cf54da5548b", "source_port":35,"target_id": "cc8e5343-3cbe-468b-86a2-cfa3652d50f4", "target_port":3},{"source":"cc8e5343-3cbe-468b-86a2-cfa3652d50f4","target":"b79210a4-8322-422c-ba1c-b39ad7dc54e6","source_id": "cc8e5343-3cbe-468b-86a2-cfa3652d50f4", "source_port":4,"target_id": "b79210a4-8322-422c-ba1c-b39ad7dc54e6", "target_port":44},{"source":"b79210a4-8322-422c-ba1c-b39ad7dc54e6","target":"fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74","source_id": "b79210a4-8322-422c-ba1c-b39ad7dc54e6", "source_port":43,"target_id": "fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74", "target_port":26},{"source":"fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74","target":"ed120259-2872-416c-a951-dbac89ec357c","source_id": "fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74", "source_port":27,"target_id": "ed120259-2872-416c-a951-dbac89ec357c", "target_port":36},{"source":"fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74","target":"78ca0e4d-d911-4d4e-b04a-222c9598bcd4","source_id": "fab4dde3-0f3a-4e1d-a6b8-c2d0db90ef74", "source_port":28,"target_id": "78ca0e4d-d911-4d4e-b04a-222c9598bcd4", "target_port":14},{"source":"78ca0e4d-d911-4d4e-b04a-222c9598bcd4","target":"ed120259-2872-416c-a951-dbac89ec357c","source_id": "78ca0e4d-d911-4d4e-b04a-222c9598bcd4", "source_port":42,"target_id": "ed120259-2872-416c-a951-dbac89ec357c", "target_port":37}]}
                </pre>
                <pre id="sample-3" class="sample">
                    {"name": "Publishing example workflow",
                        "tasks":[{"left":202,"top":25,"id":"5f905c30-d3a1-4c47-ab41-2f2387007fe8","operation": {"id": 18},"title":"Data reader","type":"data-source","z_index":10},{"left":201,"top":171,"id":"3e9e75d1-2a5c-4ce3-ab37-1999ca083fcb","operation": {"id": 7},"title":"Transformation","type":"operation","z_index":11},{"left":200,"top":297,"id":"2bd537fd-4e60-451b-b48e-7c4ee5c8fa0d","operation": {"id": 7},"title":"Transformation","type":"operation","z_index":12},{"left":200,"top":432,"id":"db305e4b-1611-422e-8518-0a6cc828c9dc","operation": {"id": 5},"title":"Filter (selection)","type":"operation","z_index":13},{"left":132,"top":563,"id":"59640f04-e099-4394-989e-d35757168f6b","operation": {"id": 17},"title":"Split dataset","type":"operation","z_index":14},{"left":382,"top":523,"id":"7819ee99-6e9d-4ec6-92bf-33b3dfad2092","operation": {"id": 4},"title":"Naive Bayes Classifier","type":"operation","z_index":15},{"left":136,"top":804,"id":"ad5a0ffb-a0ab-45cd-8cb4-55fc0352c0c4","operation": {"id": 19},"title":"Evaluate model","type":"operation","z_index":16},{"left":345,"top":701,"id":"196cd98d-05df-4ae4-bffd-2d9d9cbc5b47","operation": {"id": 1},"title":"Train and apply classification model","type":"operation","z_index":17},{"left":352,"top":892,"id":"fd89674a-1287-4007-a3e6-50a66a0cbdc7","operation": {"id": 20},"title":"Publishes a workflow as a web service","type":"operation","z_index":18}],"flows":[{"source_id": "5f905c30-d3a1-4c47-ab41-2f2387007fe8", "source_port":35,"target_id": "3e9e75d1-2a5c-4ce3-ab37-1999ca083fcb", "target_port":29},{"source_id": "3e9e75d1-2a5c-4ce3-ab37-1999ca083fcb", "source_port":30,"target_id": "2bd537fd-4e60-451b-b48e-7c4ee5c8fa0d", "target_port":29},{"source_id": "2bd537fd-4e60-451b-b48e-7c4ee5c8fa0d", "source_port":30,"target_id": "db305e4b-1611-422e-8518-0a6cc828c9dc", "target_port":1},{"source_id": "db305e4b-1611-422e-8518-0a6cc828c9dc", "source_port":2,"target_id": "59640f04-e099-4394-989e-d35757168f6b", "target_port":26},{"source_id": "59640f04-e099-4394-989e-d35757168f6b", "source_port":27,"target_id": "ad5a0ffb-a0ab-45cd-8cb4-55fc0352c0c4", "target_port":36},{"source_id": "59640f04-e099-4394-989e-d35757168f6b", "source_port":28,"target_id": "196cd98d-05df-4ae4-bffd-2d9d9cbc5b47", "target_port":19},{"source_id": "7819ee99-6e9d-4ec6-92bf-33b3dfad2092", "source_port":21,"target_id": "196cd98d-05df-4ae4-bffd-2d9d9cbc5b47", "target_port":18},{"source_id": "196cd98d-05df-4ae4-bffd-2d9d9cbc5b47", "source_port":20,"target_id": "ad5a0ffb-a0ab-45cd-8cb4-55fc0352c0c4", "target_port":37},{"source_id": "196cd98d-05df-4ae4-bffd-2d9d9cbc5b47", "source_port":20,"target_id": "fd89674a-1287-4007-a3e6-50a66a0cbdc7", "target_port":40}]}
                </pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row hide">
            <div class="col-md-12">
                  <div style="text-align: left">
                    <small><pre><code class="python"></code></pre></small>
                </div>
                <textarea class="form-control" style="font-size:8pt" rows="10" id="save-area"></textarea>
            </div>
        </div>
        <div class="hide">
            <load-workflow-component :show.sync="showModalLoadWorkflow"></load-workflow-component>
        </div>
    </div>
    <div v-else>
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-4"></div>
    
                <div class="col-md-4">
                    <section class="login-form">
                        <form method="post" action="#" role="login">
                            <div class="logo">
                                <img src=""/>
                                <strong>Lemonade</strong>
                            </div>

                            <br/>
                            <input type="email" name="email" placeholder="Email" xrequired class="form-control input-lg" value="" v-model="username"/>
                            <br/>
                            <input type="password" class="form-control input-lg" id="password" placeholder="Password" xrequired="" v-model="passwd"/>
                            
                            
                            <div class="pwstrength_viewport_progress"></div>
                            
                            <br/>
                            <button type="submit" name="go" class="btn btn-lg btn-primary btn-block" @click.stop.prevent="doLogin">Sign in</button>
                        </div>
                        </form>
                    </section>  
                </div>
                <div class="col-md-4"></div>
            </div>
        </div>
    </div>
</div>