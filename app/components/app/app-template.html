<div>
    <div>
        <div class="container-fluid">
            <div class="row small-padding">
                    <div id="appx" class="not-selectable">
                        <div class="panel operation panel-primary panel-inverse" ref="toolbox" id="toolbox">
                            <div class="panel-heading">
                                {{title}}
                            </div>
                            <div class="panel-content">
                                <div style="padding: 5px">
                                    <label>Search:</label>
                                    <input class="form-control" v-model="filterOp" v-on:keyup="filterOperations"
                                        placeholder="Informe at least 3 letters to filter"/>
                                </div>
                                <div id="menu-operations" style="height: calc(100vh - 204px); position: relative; overflow:hidden; padding-right:10px">
                                    <ul class="nav nav-list">
                                        <li class="drop-menu-item-2" v-for="group in groupedOperations">
                                            <a v-on:click="toggle"><span class="fa-caret-right fa"></span> {{ group[0] }}</a>
                                            <ul class="nav nav-list tree" :class="filtered ? 'slide-down': 'slide-up'">
                                                <div v-for="subgroup in group[1]">
                                                    <div v-if="subgroup[0].split('#')[1].length">
                                                        <ul class="nav nav-list">
                                                            <li class="drop-menu-item-3">
                                                                <a v-on:click="toggle"><span class="fa-caret-right fa"></span> {{ subgroup[0].split('#')[1] }} </a>
                                                                <ul class="nav nav-list tree" :class="filtered ? 'slide-down': 'slide-up'">
                                                                    <span v-for="op in subgroup[1]" :key="op.id">
                                                                        <toolbox-component :operation="op" />
                                                                    </span>
                                                                </ul>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div v-else>
                                                        <span v-for="op in subgroup[1]">
                                                            <toolbox-component :operation="op" />
                                                        </span>
                                                    </div>
                                                </div>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-primary panel-inverse" id="workflow" ref="workflow">
                            <div class="panel-heading">
                                Workflow
                            </div>
                            <div class="panel-content">
                                <diagram-component form-container="properties-form"></diagram-component>
                            </div>
                        </div>
                        <div class="panel panel-inverse panel-primary lemonade-properties" ref="properties" id="properties">
                            <div class="panel-heading">
                                Properties
                            </div>
                            <div class="panel-block" id="panel-properties">
                                <div class="property-description">
                                    <dl>
                                        <dt>{{task.operation.name}}  ({{task.id}})</dt>
                                        <dd>{{task.operation.description}}</dd>
                                    </dl>   
                                </div>
                                <div id="properties-form" class="container" v-if="task">
                                    <div>
                                        <fieldset v-for="form in forms">
                                            <legend>{{form.name}}</legend>
                                            <div v-for="field in form.fields">
                                                <keep-alive>
                                                    <component :is="field.suggested_widget + '-component'" :field="field" :value="getValue(field.name)" :suggestions="getSuggestions(task.id)">

                                                    </component>
                                                </keep-alive>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="panel panel-inverse panel-primary"  id="deploy" ref="deploy">
                            <div class="panel-heading">
                                Deploy configuration
                            </div>
                            <div class="panel-content" style="padding: 5px 5px 10px 5px">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-md-12">
                                            Please, complete the required information for the deployment of the workflow:
                                        </div>
                                        <div class="col-md-12">
                                            <label>Name:</label>
                                            <input type="text" class="form-control" required/>
                                        </div>
                                        <div class="col-md-12">
                                            <label>Authorization token:</label>
                                            <input type="text" class="form-control" required/>
                                        </div>
                                        <div class="col-md-12">
                                            <label>Description:</label>
                                            <textarea class="form-control"></textarea>
                                        </div>
                                        <div class="col-md-4">
                                            <label>CPUs:</label>
                                            <input type="text" class="form-control" required/>
                                        </div>
                                        <div class="col-md-4">
                                            <label>Memory:</label>
                                            <input type="text" class="form-control" required/>
                                        </div>
                                        <div class="col-md-4">
                                            <label>Response time:</label>
                                            <input type="text" class="form-control" required/>
                                        </div>
                                        
                                        <div class="col-md-12">
                                            <br/>
                                            <label>Select how inputs will be deployed</label>
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th class="col-md-3 text-center">Operation</th>
                                                        <th class="col-md-3 text-center">Input name</th>
                                                        <th class="col-md-3 text-center">Comment</th>
                                                        <th class="col-md-3 text-center">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!--
                                                <tr v-for="ds in deployInfo.dataSources">
                                                    <td class="text-center">{{ds.operation.name}}</td>
                                                    <td><input class="form-control"/></td>
                                                    <td>{{ds.forms.comment.value || '-'}}</td>
                                                    <td>
                                                        <select class="form-control">
                                                            <option>Keep intact</option>
                                                            <option>Discard</option>
                                                            <option>Use as input for service</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                -->
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-12">
                                            <button class="btn btn-primary" xclick="execute"><span class="fa fa-play"></span> Execute</button>
                                            <button class="btn btn-danger" @click="cancelDeploy">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
        <div class="row hide">
            <div class="col-md-12">
                <div style="text-align: left">
                    <small><pre><code class="python"></code></pre></small>
                </div>
                <textarea class="form-control" style="font-size:8pt" rows="10" id="save-area"></textarea>
            </div>
        </div>
    </div>
    <div v-if="errors.length > 0">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1>{{errors}}</h1>
                </div>
            </div>
        </div>
    </div>
  
